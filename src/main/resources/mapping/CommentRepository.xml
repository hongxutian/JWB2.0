<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- mapper 为根元素节点， 一个namespace对应一个repo -->
<mapper namespace="com.hnu.repository.CommentRepository">

    <select id="findCommentsByDemandId" resultType="com.hnu.entity.newest.CommentInfoBean" parameterType="String">
        select u.avatar_url as c_avatar_url, c.u_id as c_uid, u.nick_name as c_nick_name, c.comment_content, c.subtime as c_subtime, c.reply_id as replyId
         from medical_resources_userinfo u, medical_resources_comment c
         where c.demand_id = #{demandId} and c.u_id = u.open_id
         order by c.subtime DESC;
    </select>

    <insert id="insertComment" parameterType="com.hnu.entity.Comment">
        insert into medical_resources_comment (u_id, demand_id, subtime, comment_content, reply_id)
        values (#{u_id},#{demand_id},#{subtime},#{comment_content},#{replyId});
    </insert>

</mapper>